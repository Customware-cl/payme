<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Estado de tus pr√©stamos - PayME">
    <title>Estado de Pr√©stamos - PayME</title>

    <!-- Resource hints para mejor performance -->
    <link rel="preconnect" href="https://qgjxkszfdoolaxmsupil.supabase.co" crossorigin>
    <link rel="dns-prefetch" href="https://qgjxkszfdoolaxmsupil.supabase.co">

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla 0: ¬øQu√© pr√©stamos deseas ver? -->
    <section id="screen-direction" class="screen active">
        <div class="container">
            <div class="header">
                <button class="btn-back" id="back-to-menu-from-direction">‚Üê</button>
                <h1>¬øQu√© pr√©stamos deseas ver?</h1>
                <p class="subtitle">Selecciona una opci√≥n</p>
            </div>

            <div class="content">
                <div class="direction-buttons">
                    <button type="button" class="direction-btn" data-loan-type="lent">
                        <span class="icon">üí∏</span>
                        <span class="label">Yo prest√©</span>
                        <span class="description">Ver dinero u objetos que prestaste</span>
                    </button>
                    <button type="button" class="direction-btn" data-loan-type="borrowed">
                        <span class="icon">üì•</span>
                        <span class="label">Me prestaron</span>
                        <span class="description">Ver dinero u objetos que te prestaron</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <div class="container hidden" id="loans-view-container">

        <!-- Header (para vista de pr√©stamos) -->
        <header class="header hidden" id="loans-header">
            <button class="btn-back-header" id="back-to-direction">‚Üê</button>
            <h1 id="loans-title">Estado de Pr√©stamos</h1>
            <p class="subtitle" id="loans-subtitle">Revisa tus pr√©stamos</p>
        </header>

        <!-- Loading State -->
        <div id="loading-state" class="loading-state hidden">
            <div class="spinner"></div>
            <p>Cargando pr√©stamos...</p>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="empty-state hidden">
            <div class="empty-icon">üìä</div>
            <h2 id="empty-title">No tienes pr√©stamos</h2>
            <p id="empty-message">Cuando registres pr√©stamos aparecer√°n aqu√≠</p>
            <button class="btn-primary" id="btn-new-loan-empty">Crear pr√©stamo</button>
        </div>

        <!-- Loans Content (secci√≥n √∫nica reutilizable) -->
        <main id="loans-content" class="loans-content hidden">
            <section class="loans-section" id="loans-section">
                <h2 class="section-title" id="section-title">Pr√©stamos</h2>

                <!-- Toggle de vista -->
                <div class="view-toggle">
                    <button class="toggle-btn active" data-view="grouped">
                        <span class="toggle-icon">üìä</span>
                        <span>Agrupada</span>
                    </button>
                    <button class="toggle-btn" data-view="detailed">
                        <span class="toggle-icon">üìã</span>
                        <span>Detallada</span>
                    </button>
                </div>

                <div id="loans-list" class="loans-list">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by PayME</p>
        </footer>
    </div>

    <!-- Drawer para pr√©stamos agrupados -->
    <div id="drawer-grouped-loans" class="drawer hidden">
        <div class="drawer-overlay"></div>
        <div class="drawer-content">
            <!-- Header -->
            <div class="drawer-header">
                <button class="btn-close-drawer" id="btn-close-drawer">‚úï</button>
                <h3>Pr√©stamos a <strong id="drawer-contact-name">Contacto</strong></h3>
                <div class="drawer-meta">
                    <span id="drawer-total">üí∞ $0</span>
                    <span>‚Ä¢</span>
                    <span id="drawer-count">0 pr√©stamos</span>
                </div>
            </div>

            <!-- Lista de pr√©stamos -->
            <div class="drawer-body">
                <div id="drawer-loans-list">
                    <!-- Se llena din√°micamente con sub-tarjetas -->
                </div>
            </div>
        </div>
    </div>

    <script src="loans.js"></script>
</body>
</html>
